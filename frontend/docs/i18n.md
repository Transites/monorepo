# Internacionalização (i18n) no Projeto Transitos

Este documento descreve o sistema de internacionalização implementado no projeto Transitos, incluindo como adicionar novos idiomas, como usar o sistema em componentes Vue, e como manter as traduções.

## Estrutura de Arquivos

```
src/
└── i18n/
    ├── index.ts           # Configuração principal do i18n
    ├── types.ts           # Definições de tipos para as traduções
    ├── json.d.ts          # Declaração de tipos para importação de arquivos JSON
    └── locales/
        └── pt-BR.json     # Arquivo de tradução para Português (Brasil)
        └── [locale].json  # Outros arquivos de tradução
```

## Adicionando um Novo Idioma

Para adicionar um novo idioma ao projeto:

1. Crie um novo arquivo JSON na pasta `src/i18n/locales/` com o nome do idioma (ex: `en-US.json`).
2. Copie o conteúdo do arquivo `pt-BR.json` para o novo arquivo.
3. Traduza todos os valores para o novo idioma.
4. Adicione o novo idioma à lista de idiomas disponíveis no componente `LanguageSwitcher.vue`.
5. Atualize o tipo genérico no arquivo `src/i18n/index.ts` para incluir o novo idioma.

Exemplo de adição do idioma inglês:

```typescript
// Em src/i18n/index.ts
const i18n = createI18n<[MessageSchema], 'pt-BR' | 'en-US'>({
  // ...
});

// Em src/components/LanguageSwitcher.vue
const availableLocales = [
  { code: 'pt-BR', name: 'Português (Brasil)' },
  { code: 'en-US', name: 'English (US)' },
];
```

## Usando o Sistema de Tradução em Componentes Vue

### Usando a API de Composição (Composition API)

```vue
<template>
  <div>
    <h1>{{ t('section.title') }}</h1>
    <p>{{ t('section.description') }}</p>
  </div>
</template>

<script setup>
import { useI18n } from '@/i18n';

const { t } = useI18n();
</script>
```

### Usando a API de Opções (Options API)

```vue
<template>
  <div>
    <h1>{{ $t('section.title') }}</h1>
    <p>{{ $t('section.description') }}</p>
  </div>
</template>

<script>
export default {
  name: 'MyComponent'
}
</script>
```

## Pluralização e Formatação

Para usar pluralização:

```vue
<template>
  <p>{{ $tc('messages.items', count, { count }) }}</p>
</template>
```

No arquivo de tradução:

```json
{
  "messages": {
    "items": "Nenhum item | Um item | {count} itens"
  }
}
```

Para formatar datas e números, use os métodos `$d` e `$n`:

```vue
<template>
  <p>{{ $d(date, 'long') }}</p>
  <p>{{ $n(number, 'currency') }}</p>
</template>
```

## Verificação de Traduções

O projeto inclui um script que verifica se todas as chaves de tradução estão presentes em todos os arquivos de idioma. Este script é executado automaticamente durante o processo de build:

```bash
npm run check-translations
```

O script irá falhar se alguma chave estiver faltando ou se algum valor estiver vazio, garantindo que todas as traduções estejam completas antes do deploy.

## Melhores Práticas

1. **Use chaves hierárquicas**: Organize as traduções em uma estrutura hierárquica para facilitar a manutenção (ex: `navbar.search.placeholder`).

2. **Evite strings hardcoded**: Sempre use o sistema de tradução para textos visíveis ao usuário, mesmo que o projeto tenha apenas um idioma inicialmente.

3. **Mantenha as traduções atualizadas**: Ao adicionar ou modificar textos na interface, atualize todos os arquivos de tradução.

4. **Use variáveis para valores dinâmicos**: Para textos que incluem valores dinâmicos, use placeholders nas traduções:

   ```json
   {
     "welcome": "Olá, {name}!"
   }
   ```

   ```vue
   <template>
     <p>{{ $t('welcome', { name: user.name }) }}</p>
   </template>
   ```

5. **Aproveite o TypeScript**: O sistema de tradução é totalmente tipado, então use o autocomplete do seu IDE para encontrar as chaves disponíveis.

## Solução de Problemas

Se você encontrar problemas com o sistema de tradução, verifique:

1. Se todas as chaves estão definidas em todos os arquivos de idioma.
2. Se o idioma está corretamente configurado no componente `LanguageSwitcher.vue`.
3. Se o idioma está incluído na definição de tipo no arquivo `src/i18n/index.ts`.
4. Se você está usando a sintaxe correta para acessar as traduções (`$t` ou `t`).